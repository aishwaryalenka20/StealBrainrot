<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Steal the Brainrot üòõüòõüòõ (Rarities & Points, BUGFIX)</title>
<style>
  :root{--bg:#fcfeff;--card:#fff;--ink:#072038;--muted:#526779;--accent:#1f9c93}
  body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;background:linear-gradient(180deg,#f0fbff 0%,#ffffff 60%);color:var(--ink);display:flex;align-items:center;justify-content:center;min-height:100vh}
  .wrap{width:min(960px,96vw);padding:18px}
  header{display:flex;align-items:center;justify-content:space-between}
  h1{margin:0;font-size:20px}
  .subtitle{color:var(--muted);font-size:13px}
  .board{display:grid;grid-template-columns:1fr 300px;gap:14px;margin-top:14px}
  .card{background:var(--card);border-radius:12px;padding:12px;box-shadow:0 6px 20px rgba(0,0,0,.06)}
  .players{display:flex;gap:6px;flex-wrap:wrap}
  .player{padding:6px 8px;border-radius:8px;background:#eef8f6;border:1px solid #d8f0ec}
  button{background:var(--accent);color:#fff;border:none;padding:8px 12px;border-radius:10px;cursor:pointer}
  button.secondary{background:#e9eef5;color:#111}
  .choice{padding:10px;border:1px solid #e6eef4;border-radius:10px;margin-top:8px;cursor:pointer}
  .choice.correct{background:#eafff8}
  .choice.wrong{background:#fff6f5}
  .log{height:200px;overflow:auto;background:#fbfdff;border-radius:8px;padding:8px;border:1px dashed #e8f1f7;font-size:13px}

  /* POPUP STYLES */
  .popup {
    position: fixed;
    width: 280px;
    background:#ffffff;
    border:1px solid #dfe7f3;
    border-radius:12px;
    box-shadow:0 18px 40px rgba(0,0,0,.12);
    padding:12px 12px 14px;
    z-index: 9999;
    user-select:none;
    animation: popin .16s ease-out;
  }
  .popup header {
    display:flex;align-items:center;justify-content:space-between;margin-bottom:6px
  }
  .popup h3 {margin:0;font-size:14px}
  .popup .x {
    width:22px;height:22px;border-radius:6px;border:1px solid #e2e8f5;background:#f5f8ff;color:#233;display:grid;place-items:center;cursor:pointer
  }
  .popup p {margin:6px 0 10px;font-size:13px;color:#2b3a4a}
  .popup .row {display:flex;gap:8px;flex-wrap:wrap}
  .popup button {padding:6px 10px;border-radius:8px;font-size:13px}
  .popup .ghost {background:#eef2fb;color:#0b1b2a}
  .popup .cta {background:#1f9c93;color:#fff}
  .popup .danger {background:#e96a6a}
  @keyframes popin {from{transform:scale(.95);opacity:0} to{transform:scale(1);opacity:1}}
</style>
</head>
<body>
<div class="wrap">
  <header>
    <div>
      <h1>üòõ Steal the Brainrot</h1>
      <div class="subtitle">Correct answer ‚Üí choose to <b>Steal</b> or <b>Add</b> a random brainrot. Brainrots have rankings & points. Highest total points wins.</div>
    </div>
    <div class="controls">
      <button id="newGame" class="secondary">New Game</button>
      <button id="showRules" class="secondary">Rules</button>
      <button id="demoScam" class="secondary">Please Donate</button>
    </div>
  </header>

  <div class="board">
    <section class="card main">
      <div>Round <span id="roundNum">‚Äî</span>/<span id="roundTotal">8</span> ¬∑ Current: <span id="currentPlayerName">‚Äî</span></div>
      <div class="question" id="questionText" style="margin-top:12px">Press <b>New Game</b> to start.</div>
      <div class="choices" id="choices"></div>
      <div id="explainText" style="margin-top:8px;font-size:14px"></div>
    </section>

    <aside class="card sidebar">
      <h3>Brainrot Legend </h3>
      <div class="log" id="legend" style="height:auto">
        <div>Unemployed <b>üíº</b> Job Job Job Sahur = 1 pt</div>
        <div>Food <b>üí©</b> Poopaloni Lalalalala = 2 pts</div>
        <div>Fungal  <b>ü¶†</b> = Yumirino Bacterio Infesto 3 pts</div>
        <div>Gooonnnnyyyyy <b>üåé</b> = Everyony Gononono 4 pts</div>
        <div>Extinct <b>üêª‚Äç‚ùÑÔ∏è</b> Polarbario Scandinav√≠o = 5 pts</div>
      </div>
      <h3>Players</h3>
      <div id="players" class="players"></div>
      <h3>Game Log</h3>
      <div id="log" class="log"></div>
    </aside>
  </div>
</div>

<!-- Rules modal -->
<div id="rulesModal" style="display:none;position:fixed;inset:0;background:rgba(0,0,0,.5);align-items:center;justify-content:center">
  <div style="background:#fff;padding:16px;border-radius:12px;max-width:620px">
    <h2>How to Play</h2>
    <ul>
      <li>Answer a question on your turn.</li>
      <li><b>Correct</b> ‚Üí choose <b>Steal</b> (take best brainrot from someone) or <b>Add</b> (random brainrot for you).</li>
      <li><b>Wrong</b> ‚Üí no tokens change.</li>
      <li>After 8 rounds, highest total points wins.</li>
    </ul>
    <button id="closeRules">Close</button>
  </div>
</div>

<!-- Fake scam ad  -->
<div id="scamModal" style="display:none;position:fixed;inset:0;background:rgba(0,0,0,.6);align-items:center;justify-content:center">
  <div style="background:#fff;padding:16px;border-radius:12px;max-width:520px;text-align:center">
    <h2>üö® PLEASE DONATE WE ARE GETTING SUEEEDDD üö®</h2>
    <p>‚ÄúDonate to save us from <b>Saylor Twift</b>‚Äôs lawsuit!‚Äù</p>
    <p style="font-size:13px;color:#777;margin-top:-4px">CLICK ME. CHOOSE ME. LOVE ME. *not a scam trust.*</p>
    <div style="display:flex;gap:8px;justify-content:center;margin-top:10px">
      <button id="scamStart" class="cta">Start Pop-Ups</button>
      <button id="scamClose" class="ghost">Close</button>
    </div>
    <p id="scamReveal" style="display:none;color:#a00;font-size:14px;margin-top:12px"><b>Just kidding!</b> Parody scam ad. Red flags: pressure, fake urgency, tricky buttons.</p>
  </div>
</div>

<script>
(()=>{
  // === Token rarities & points ===
  const TOKENS = [
    {name:'Job Job Job Sahur',    emoji:'üíº', points:1, weight:50},
    {name:'Poopaloni Lalalalala',  emoji:'üí©', points:2, weight:30},
    {name:'Yumirino Bacterio Infesto',      emoji:'ü¶†', points:3, weight:15},
    {name:'Everyony Gononono',      emoji:'üåé', points:4, weight:4},
    {name:'Polarbario Scandinav√≠o', emoji:'üêª‚Äç‚ùÑÔ∏è', points:5, weight:1}
  ];
  const totalPoints = arr => arr.reduce((s,t)=>s+t.points,0);
  function drawToken(){
    const totalW = TOKENS.reduce((s,t)=>s+t.weight,0);
    let r = Math.random() * totalW;
    for(const t of TOKENS){ r -= t.weight; if(r <= 0) return {...t}; }
    return {...TOKENS[0]};
  }
  function bestTokenIndex(tokens){
    let bestPts = -Infinity, bestIdx = -1;
    for(let i=0;i<tokens.length;i++){
      if(tokens[i].points > bestPts){ bestPts = tokens[i].points; bestIdx = i; }
    }
    return bestIdx;
  }

  // === Questions ===
  const QUESTIONS = [
    {q:"Airplanes contribute to warming not just by CO‚ÇÇ but also?", a:["Cooling clouds","Contrails & nitrogen oxides","They don‚Äôt","Rainbow trails"], correct:1, explain:"Contrails and NO‚Çì add extra warming."},
    {q:"Short flights have higher emissions per km?", a:["True","False"], correct:0, explain:"Takeoff/landing burn more fuel per km."},
    {q:"Why can non-stop flights be better for emissions?", a:["More snacks","Fewer takeoffs/landings","Cooler planes","They use biofuel"], correct:1, explain:"Takeoff/landing are fuel-heavy; fewer of them can reduce emissions."},
    {q:"Which transport mode is usually lowest emissions per km for individuals?", a:["Car (solo)","Bus","Domestic flight","Motorcycle"], correct:1, explain:"Buses have high occupancy and lower per-person emissions."},
    {q:"Most airplane emissions occur during‚Ä¶", a:["Takeoff & landing only","Cruise on long-haul","Taxiing","Boarding"], correct:1, explain:"Cruise dominates fuel burn on long-haul; takeoff/landing matter more on short hops."},
    {q:"Which is generally the best packing for cold-drink climate impact?", a:["Single-use glass","Aluminum can","Thick plastic bottle","Carton (aseptic)"], correct:3, explain:"Cartons are lightweight and often lower-impact than glass."},
    {q:"Biggest global source of human-caused GHGs?", a:["Buildings","Industry","Electricity & heat","Agriculture"], correct:2, explain:"Power generation is a major share globally (varies by country)."},
    {q:"Refrigerants like HFCs are potent because‚Ä¶", a:["They cool too fast","They have high global warming potentials","They contain oxygen","They cause acid rain"], correct:1, explain:"HFCs can have GWPs thousands of times higher than CO‚ÇÇ."},
    {q:"‚ÄòScope 3‚Äô emissions are‚Ä¶", a:["Only your office lights","Your company‚Äôs direct fuel use","Your supply chain & product use","Emissions you offset"], correct:2, explain:"Scope 3 covers value-chain emissions, often the largest share."},
    {q:"Best way to reduce food-related emissions?", a:["Always buy organic","Reduce food waste","Only eat imported foods","Freeze everything"], correct:1, explain:"Cutting waste is a powerful, practical lever."},
    {q:"Beef typically has higher footprint than chicken because‚Ä¶", a:["Transport distance","Methane from enteric fermentation","Seasoning used","Refrigeration"], correct:1, explain:"Ruminants emit methane; feed land-use also large."},
    {q:"Home energy quick win in most climates:", a:["LED bulbs","Painting walls white","Turning fridge colder","Keeping windows open in winter"], correct:0, explain:"LEDs are low-cost, high-impact over time."},
    {q:"Which appliance label indicates efficiency in many regions?", a:["ENERGY STAR","UL Listed","FCC","HDMI"], correct:0, explain:"ENERGY STAR identifies energy-efficient products."},
    {q:"Planting trees is always carbon neutral immediately.", a:["True","False"], correct:1, explain:"Trees remove CO‚ÇÇ over years/decades; permanence matters."},
    {q:"Best tire pressure practice for efficiency:", a:["Under-inflate slightly","Exact recommended PSI","Over-inflate by 10 PSI","Doesn‚Äôt matter"], correct:1, explain:"Manufacturer-recommended PSI optimizes safety & efficiency."},
    {q:"EVs typically have higher manufacturing emissions but lower‚Ä¶", a:["Tailpipe emissions","Battery weight","Electricity price","Tire wear"], correct:0, explain:"No tailpipe; lifecycle often better as grids get cleaner."},
    {q:"Most effective thermostat move:", a:["Crank way down at night","Program small setpoint shifts","Turn HVAC off while away for 1 hour","Leave constant at 72¬∞F"], correct:1, explain:"Small programmed changes save energy comfortably."},
    {q:"Induction stoves help climate mainly by‚Ä¶", a:["Using helium","Being wireless","High efficiency & electrification","Cooking faster"], correct:2, explain:"They‚Äôre efficient and enable moving from gas to clean electricity."},
    {q:"Fast fashion‚Äôs footprint is large due to‚Ä¶", a:["Dyeing & water use","Long product life","Slow shipping by sea","High resale rates"], correct:0, explain:"Dyeing/finishing, fiber production, and waste drive impacts."},
    {q:"Which is a greenhouse gas?", a:["Nitrogen (N‚ÇÇ)","Oxygen (O‚ÇÇ)","Water vapor (H‚ÇÇO)","Argon (Ar)"], correct:2, explain:"Water vapor is a greenhouse gas (though driven by temperature)."},
    {q:"‚ÄòCarbon intensity‚Äô of electricity means‚Ä¶", a:["CO‚ÇÇ per kWh generated","CO‚ÇÇ per household","CO‚ÇÇ per month","CO‚ÇÇ per device"], correct:0, explain:"It‚Äôs emissions per unit of electricity."},
    {q:"Most efficient lighting tech widely available:", a:["Incandescent","Halogen","Compact fluorescent","LED"], correct:3, explain:"LEDs beat CFLs and halogens in efficiency."},
    {q:"Why rail freight can be climate-friendly:", a:["Trains use helium","High ton-miles per unit energy","They fly sometimes","They‚Äôre slower"], correct:1, explain:"Trains move heavy loads with relatively low energy per ton-mile."},
    {q:"Good habit when flying is unavoidable:", a:["Pack heavier","Connect more","Choose economy class","Fly older planes"], correct:2, explain:"Economy seats result in lower per-passenger emissions."},
    {q:"Best time to charge EV (climate-wise) on a solar-heavy grid?", a:["Midday","Midnight","Sunrise","Anytime"], correct:0, explain:"Midday often has surplus solar ‚Üí lower marginal emissions."},
    {q:"What‚Äôs a carbon sink?", a:["Source of CO‚ÇÇ","Place that stores more carbon than it emits","A kitchen appliance","Only oceans"], correct:1, explain:"Sinks (forests, oceans, soils) absorb more than they release."},
    {q:"Home water heating tip:", a:["Set heater to 140‚Äì150¬∞F always","Insulate hot water pipes/tank","Run hot tap to ‚Äòclean‚Äô pipes","Use only baths"], correct:1, explain:"Insulation reduces heat loss and energy use."},
    {q:"A circular economy aims to‚Ä¶", a:["Use and dump faster","Design out waste & keep materials in use","Ban recycling","Grow landfills"], correct:1, explain:"Keep products/materials circulating at highest value."},
    {q:"Best fridge practice:", a:["Open door often to cool kitchen","Keep coils clean & door seals tight","Set to super freeze always","Store hot pots immediately"], correct:1, explain:"Coils & seals impact efficiency a lot."},
    {q:"Carbon footprint of streaming vs downloading one time:", a:["Streaming once is always higher","Downloading once & rewatching can be lower","They‚Äôre identical","Downloading is banned"], correct:1, explain:"One download replayed many times can avoid repeat data transfer."},
    {q:"Most effective recycling behavior:", a:["Wish-cycling questionable items","Rinse and follow local rules","Mix trash & recycling","Bag recyclables in black bags"], correct:1, explain:"Correct sorting prevents contamination and increases yield."},
    {q:"Biggest driver of aviation non-CO‚ÇÇ effects:", a:["Contrails forming cirrus","Gate announcements","Seat fabric","Landing gear"], correct:0, explain:"Contrail-induced cirrus can add notable warming."}
  ];

  // === State ===
  let players = [], current = 0, deck = [], round = 0, totalRounds = 8;

  // === Elements ===
  const logEl = document.getElementById('log');
  const playersEl = document.getElementById('players');
  const questionText = document.getElementById('questionText');
  const choicesEl = document.getElementById('choices');
  const explainText = document.getElementById('explainText');
  const currentPlayerName = document.getElementById('currentPlayerName');
  const roundNum = document.getElementById('roundNum');
  const roundTotal = document.getElementById('roundTotal');

  function writeLog(s){ const p = document.createElement('div'); p.innerHTML = s; logEl.prepend(p); }

  function setupPlayers(n=3){
    players = [];
    for(let i=1;i<=n;i++) players.push({name:'P'+i, tokens:[]});
    current = 0; round = 0;
    renderPlayers(); updateRoundLabel();
  }

  function renderPlayers(){
    playersEl.innerHTML = '';
    players.forEach((pl)=>{
      const pts = totalPoints(pl.tokens);
      const d = document.createElement('div'); d.className='player';
      d.innerHTML = `<b>${pl.name}</b> <span style="margin-left:6px">${pl.tokens.map(t=>t.emoji).join('')}</span> <span style="margin-left:6px;color:#335">(${pts} pts)</span>`;
      playersEl.appendChild(d);
    });
    currentPlayerName.textContent = players[current]?.name || '‚Äî';
  }

  function updateRoundLabel(){ roundNum.textContent = Math.min(round+1, totalRounds); roundTotal.textContent = totalRounds; }
  function shuffleDeck(){ deck = [...QUESTIONS].sort(()=>Math.random()-.5); }
  function ask(){ if(deck.length===0) shuffleDeck(); const q = deck.pop(); showQuestion(q); }

  function showQuestion(q){
    explainText.textContent = '';
    questionText.textContent = q.q;
    choicesEl.innerHTML = '';
    q.a.forEach((opt,i)=>{
      const b = document.createElement('div'); b.className='choice'; b.textContent = opt;
      b.onclick = ()=> selectAnswer(i,q);
      choicesEl.appendChild(b);
    });
  }

  function selectAnswer(i,q){
    [...choicesEl.children].forEach((ch,idx)=>{
      ch.style.pointerEvents='none';
      if(idx===q.correct) ch.classList.add('correct');
      if(idx===i && idx!==q.correct) ch.classList.add('wrong');
    });

    if(i===q.correct){
      explainText.innerHTML = '<b>Correct!</b> ' + q.explain;
      writeLog(players[current].name + ' answered correctly.');
      showStealPrompt(); // choose to steal/add
    } else {
      explainText.innerHTML = '<b>Wrong.</b> ' + q.explain;
      writeLog(players[current].name + ' answered wrong.');
      proceedNextTurn();
    }
  }

  function showStealPrompt(){
    const box = document.createElement('div');
    box.style.marginTop='8px';
    box.innerHTML = 'Choose: ';

    // Steal buttons for other players
    players.forEach((p,idx)=>{
      if(idx===current) return;
      const btn = document.createElement('button');
      btn.textContent = 'Steal from ' + p.name;
      btn.onclick = ()=>{ doSteal(idx); box.remove(); };
      btn.style.marginRight='6px';
      box.appendChild(btn);
    });

    // Add-to-self
    const selfBtn = document.createElement('button');
    selfBtn.textContent = 'Add to ' + players[current].name;
    selfBtn.onclick = ()=>{ doSteal(-1); box.remove(); };
    box.appendChild(selfBtn);

    logEl.prepend(box);
  }

  function doSteal(victimIdx){
    if(victimIdx === -1){
      const tok = drawToken();
      players[current].tokens.push(tok);
      writeLog(players[current].name + ' adds ' + tok.emoji + ' (' + tok.name + ', ' + tok.points + ' pt' + (tok.points>1?'s':'') + ').');
    } else {
      const victim = victimIdx;
      if(players[victim].tokens.length === 0){
        const tok = drawToken();
        players[current].tokens.push(tok);
        writeLog(players[victim].name + ' has no brainrots ‚Äî ' + players[current].name + ' gains ' + tok.emoji + ' (' + tok.name + ').');
      } else {
        // steal highest-point token from victim
        const idx = bestTokenIndex(players[victim].tokens);
        const stolen = players[victim].tokens.splice(idx,1)[0];
        players[current].tokens.push(stolen);
        writeLog(players[current].name + ' steals ' + stolen.emoji + ' (' + stolen.name + ', ' + stolen.points + ' pts) from ' + players[victim].name + '!');
      }
    }

    renderPlayers();
    proceedNextTurn();
  }

  function proceedNextTurn(){
    round++;
    if(round >= totalRounds){ finishGame(); return; }
    current = (current + 1) % players.length;
    updateRoundLabel();
    renderPlayers();
    ask();
  }

  function finishGame(){
    const scored = players.map(p=>({name:p.name, pts: totalPoints(p.tokens)})).sort((a,b)=> b.pts - a.pts);
    questionText.textContent = 'Game over! WinnerüèÖüèÖüèÖ: ' + scored[0].name;
    choicesEl.innerHTML = '';
    explainText.textContent = scored.map(s=> s.name+': '+s.pts+' pts').join(' | ');
    writeLog('Game finished.');
  }

  // === UI wiring ===
  document.getElementById('newGame').onclick = ()=>{ setupPlayers(3); shuffleDeck(); ask(); };
  document.getElementById('showRules').onclick = ()=>{ document.getElementById('rulesModal').style.display='flex'; };
  document.getElementById('closeRules').onclick = ()=>{ document.getElementById('rulesModal').style.display='none'; };

  // --- Fake Ad: Multi-pop-up mini-game (now fully interactable) ---
  const scamModal = document.getElementById('scamModal');
  const scamReveal = document.getElementById('scamReveal');
  document.getElementById('demoScam').onclick = ()=>{ scamModal.style.display='flex'; scamReveal.style.display='none'; };
  document.getElementById('scamClose').onclick = ()=>{ scamModal.style.display='none'; cleanupPopups(); };
  document.getElementById('scamStart').onclick = startPopupStorm;

  let remaining = 0;
  let popups = [];

  function cleanupPopups(){
    popups.forEach(p => p.remove());
    popups = [];
    remaining = 0;
  }

  function startPopupStorm(){
    cleanupPopups();
    scamReveal.style.display='none';
    const configs = [
      { kind:'tinyX', title:'BUY A JET 2 UR HOLIDAY ‚úàÔ∏è', text:'Click the button NOW' },
      { kind:'runner', title:'ALLOW NOTIFICATIONS üîî', text:'Try to hit ‚ÄúAllow‚Äù‚Ä¶ I DARE U' },
      { kind:'quiz', title:'Ultra-Secure Check ‚úÖ', text:'What is ur ip adress' },
      { kind:'captcha', title:'How Much of a gooner are u?', text:'Be honest slide to 100%' },
      { kind:'timer', title:'Urgent Offer ‚è±Ô∏è', text:'Wait 3 seconds then close' },
    ];
    remaining = configs.length;
    configs.forEach(cfg => spawnPopup(cfg));
  }

  function spawnPopup(cfg){
    const div = document.createElement('div');
    div.className = 'popup';
    div.style.left = Math.max(8, Math.random()*(window.innerWidth-300))+'px';
    div.style.top  = Math.max(8, Math.random()*(window.innerHeight-200))+'px';

    const header = document.createElement('header');
    const h3 = document.createElement('h3'); h3.textContent = cfg.title;
    const x = document.createElement('div'); x.className='x'; x.textContent='‚úï';
    header.appendChild(h3); header.appendChild(x);

    const p = document.createElement('p'); p.textContent = cfg.text;
    const row = document.createElement('div'); row.className='row';

    div.appendChild(header); div.appendChild(p); div.appendChild(row);
    document.body.appendChild(div);
    popups.push(div);

    // Close helper
    function closePopup(){
      if(!div.parentNode) return;
      div.remove();
      remaining--;
      if(remaining<=0){
        scamReveal.style.display='block';
      }
    }

    // Dragging
    let drag=false, sx=0, sy=0, sl=0, st=0;
    header.style.cursor='move';
    header.onmousedown = e=>{ drag=true; sx=e.clientX; sy=e.clientY; sl=div.offsetLeft; st=div.offsetTop; e.preventDefault(); };
    window.addEventListener('mousemove', e=>{
      if(!drag) return;
      const nx = sl + (e.clientX - sx);
      const ny = st + (e.clientY - sy);
      div.style.left = Math.min(window.innerWidth-300, Math.max(0, nx)) + 'px';
      div.style.top  = Math.min(window.innerHeight-160, Math.max(0, ny)) + 'px';
    });
    window.addEventListener('mouseup', ()=> drag=false);

    // Behaviors
    if(cfg.kind==='tinyX'){
      const fake = document.createElement('button');
      fake.className='ghost'; fake.textContent='Close';
      fake.onclick = ()=>{ p.textContent = 'Bruh.'; };
      row.appendChild(fake);
      x.onclick = closePopup;
    }
    else if(cfg.kind==='runner'){
      const allow = document.createElement('button'); allow.className='cta'; allow.textContent='Allow';
      const nope = document.createElement('button'); nope.className='ghost'; nope.textContent='Deny';
      let dodges=0;
      allow.onmouseenter = ()=>{
        dodges++;
        const dx = (Math.random()*160-80);
        const dy = (Math.random()*100-50);
        div.style.left = Math.min(window.innerWidth-300, Math.max(0, div.offsetLeft+dx))+'px';
        div.style.top  = Math.min(window.innerHeight-160, Math.max(0, div.offsetTop+dy))+'px';
        if(dodges>3){ allow.onclick = closePopup; p.textContent='Nah go study twin.'; }
      };
      nope.onclick = ()=>{ p.textContent='Deny won\'t help. Lure the ‚ÄúAllow‚Äù and click it.'; };
      row.appendChild(allow); row.appendChild(nope);
      x.onclick = closePopup;
    }
    else if(cfg.kind==='quiz'){
      const input = document.createElement('input'); input.type='text'; input.placeholder='Answer'; input.style.flex='1'; input.style.padding='6px';
      const ok = document.createElement('button'); ok.className='cta'; ok.textContent='Verify';
      ok.onclick = ()=>{ if(input.value.trim()==='67676.76767676.7676767676.767676767'){ closePopup(); } else { p.textContent='Nope. 32 bit digits numbers r cool.'; } };
      row.appendChild(input); row.appendChild(ok);
      x.onclick = closePopup;
    }
    else if(cfg.kind==='captcha'){
      const range = document.createElement('input'); range.type='range'; range.min='0'; range.max='100'; range.value='0'; range.style.width='100%';
      range.oninput = ()=>{ if(parseInt(range.value,10) >= 100){ closePopup(); } };
      row.appendChild(range);
      x.onclick = closePopup;
    }
    else if(cfg.kind==='timer'){
      const waitBtn = document.createElement('button'); waitBtn.className='ghost'; waitBtn.textContent='Please wait‚Ä¶';
      waitBtn.disabled = true;
      row.appendChild(waitBtn);
      setTimeout(()=>{ waitBtn.disabled=false; waitBtn.textContent='Close Now'; waitBtn.onclick = closePopup; }, 3000);
      x.onclick = closePopup;
    }
  }

  // === Init ===
  setupPlayers(3);

  // Optional sanity test
  window._brainrotTests = function(){
    const results = {ok:0, fail:0, logs:[]};
    function assert(c,m){ c?results.ok++:(results.fail++,results.logs.push('FAIL: '+m)); }
    (function(){ const pts = totalPoints([{points:1},{points:2},{points:5}]); assert(pts===8,'sum points');})();
    (function(){ const arr=[{points:1},{points:4},{points:3}]; assert(bestTokenIndex(arr)===1,'best index');})();
    console.log('Brainrot tests ‚Äî ok:',results.ok,'fail:',results.fail,results.logs);
    return results;
  };
})();
</script>
</body>
</html>
